{% extends "base.html" %}
{% block content %}

<div class="container profile-container mt-4">
  <!-- Profile Header -->
  <div class="profile-header p-4 rounded shadow-sm mb-4 bg-white d-flex justify-content-between align-items-center">
    <div>
      <h2>{{ other_user.name }}</h2>
      <p class="text-muted">{{ other_user.email }}</p>
    </div>
    {% if user.id != other_user.id %}
      <form method="POST" action="{% if other_user.id in followed_ids %}{{ url_for('unfollow_user', user_id=other_user.id) }}{% else %}{{ url_for('follow_user', user_id=other_user.id) }}{% endif %}">
        <button type="submit" class="btn btn-primary">
          {% if other_user.id in followed_ids %}Unfollow{% else %}Follow{% endif %}
        </button>
      </form>
    {% endif %}
  </div>

  <!-- Moods Section -->
  <div class="moods-section mb-4">
    <h4>Mood Posts</h4>
    {% if moods %}
      <div class="list-group">
        {% for m in moods %}
          <div class="list-group-item mb-2 rounded shadow-sm">
            <div class="d-flex justify-content-between">
              <strong>{{ m.username }}</strong>
              <span class="text-muted">{{ m.created_at.strftime('%b %d, %Y %H:%M') }}</span>
            </div>
            <p>{{ m.content }}</p>
            <span class="badge {% if m.emotion=='positive' %}bg-success{% elif m.emotion=='negative' %}bg-danger{% else %}bg-secondary{% endif %}">
              {{ m.emotion|capitalize }}
            </span>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted">No moods posted yet.</p>
    {% endif %}
  </div>

  <!-- Memories Section -->
  <div class="memories-section mb-4">
    <h4>Memories</h4>
    {% if memories %}
      <div class="list-group">
        {% for mem in memories %}
          <div class="list-group-item mb-2 rounded shadow-sm">
            <div class="d-flex justify-content-between">
              <strong>{{ mem.title }}</strong>
              <span class="text-muted">{{ mem.created_at.strftime('%b %d, %Y') }}</span>
            </div>
            <p>{{ mem.body }}</p>
            <span class="badge bg-info">{{ mem.tag }}</span>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted">No memories shared yet.</p>
    {% endif %}
  </div>
</div>

{% endblock %}
