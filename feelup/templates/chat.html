{% extends "base.html" %}
{% block title %}Chat with {{ other_user.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Chat with {{ other_user.name }}</h2>
  <div class="card p-2 shadow-sm">
    <div class="chat-box mb-2">
      {% for msg in messages %}
        {% set mine = (msg.sender and msg.sender.id == user.id) %}
        <div class="{{ 'message-out' if mine else 'message-in' }}">
          <div class="small text-muted mb-1">{{ msg.sender.name if msg.sender else 'Guest' }}</div>
          {{ msg.text }}
        </div>
      {% endfor %}
    </div>
    <form method="POST" class="d-flex gap-2">
      <input type="text" name="text" class="form-control" placeholder="Type your message..." required>
      <button type="submit" class="btn btn-success">Send</button>
    </form>
  </div>
</div>
{% endblock %}
